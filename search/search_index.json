{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"League Stats Documentation","text":"<p>Welcome to the documentation site for League Stats \u2013 a toolkit for collecting, analyzing and visualizing your personal League of Legends match history.</p>"},{"location":"#quick-start","title":"Quick Start","text":"<ol> <li>Clone the repository</li> <li>Install dependencies</li> <li>Configure your Riot API token in <code>config.env</code></li> <li>Fetch matches with the CLI</li> <li>Generate analytics and charts</li> </ol> <p>See the sections in the left navigation for deeper details.</p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>Local match caching to minimize API calls</li> <li>Flexible filtering (queues, game modes, ARAM exclusion)</li> <li>Comprehensive visualization suite (objectives, economy, performance trends, jungle clears, etc.)</li> <li>Extensible architecture: each visualization is a focused module</li> </ul>"},{"location":"#project-vs-live-data","title":"Project vs. Live Data","text":"<p>This site is static (built by MkDocs) and does not call the Riot API. All dynamic analysis still happens locally via the CLI and the GUI. To publish example charts on the site you can:</p> <ol> <li>Generate PNGs locally in the <code>output/</code> directory</li> <li>Commit selected images under <code>docs/examples/</code> (create if needed)</li> <li>Reference them in documentation pages with standard Markdown image syntax</li> </ol>"},{"location":"#adding-example-charts","title":"Adding Example Charts","text":"<p>Create a directory:</p> <pre><code>docs/examples/\n</code></pre> <p>Copy representative PNGs (avoid personally identifying info if sharing publicly) and embed:</p> <pre><code>![Performance Trends](examples/performance_trends_DemoPlayer.png)\n</code></pre>"},{"location":"#contributing","title":"Contributing","text":"<p>See the Contributing page for guidelines. For any user\u2011visible change remember to update docs and (if releasing) the changelog.</p> <p>Generated with MkDocs Material.</p>"},{"location":"architecture/","title":"Architecture","text":"<p>Use this page as a quick, practical map of how League Stats works. It shows the flow of data, the key components, and the most common extension points.</p> <p></p>"},{"location":"architecture/#1-data-flow-at-a-glance","title":"1) Data flow (at a glance)","text":"<pre><code>Riot API \u2192 league.ensure_matches_for_player (async-first; sync fallback)\n         \u2192 matches/*.json\n         \u2192 analysis/visualizations (via CLI or Streamlit GUI)\n         \u2192 output/*.png\n\nSide channels:\n\u2022 Config: config.env auto-loaded via python-dotenv\n\u2022 Logging: logs/league_stats.log (centralized file logging)\n</code></pre>"},{"location":"architecture/#2-entry-points","title":"2) Entry points","text":"<ul> <li>CLI</li> <li><code>python -m stats_visualization.league</code>: fetch/caching</li> <li><code>python analyze.py</code>: analysis and figure generation</li> <li> <p>Async-first (httpx + asyncio) with safe sync fallback (requests) when httpx is absent</p> </li> <li> <p>Streamlit GUI (<code>stats_visualization/gui_app.py</code>)</p> </li> <li>Same analysis/visualization pipeline as the CLI</li> <li>Saves figures in <code>output/</code> and logs to <code>logs/league_stats.log</code></li> </ul>"},{"location":"architecture/#3-components","title":"3) Components","text":"<ul> <li><code>league.py</code></li> <li><code>fetch_puuid_by_riot_id(game_name, tag_line, token)</code></li> <li><code>fetch_match_ids(puuid, count)</code></li> <li><code>fetch_match(match_id, token)</code> (optionally includes timeline)</li> <li><code>ensure_matches_for_player(puuid, token, matches_dir, min_matches, fetch_count)</code></li> <li>Async-first, guarded by optional <code>httpx</code> with requests-based fallback</li> <li> <p>Caching: skips duplicates using existing JSON filenames</p> </li> <li> <p><code>analyze.py</code></p> </li> <li>CLI for player/team analysis; optional auto-fetch when local data is low</li> <li> <p>Aggregates player statistics (K/D/A, win rate, roles, champions, gold, damage)</p> </li> <li> <p>Visualization scripts (<code>visualizations/*.py</code>)</p> </li> <li>Load matches via <code>analyze.load_match_files()</code> or helper</li> <li> <p>Derive metrics and produce Matplotlib figures saved to <code>output/</code></p> </li> <li> <p>Utilities (<code>stats_visualization/utils.py</code>)</p> </li> <li><code>setup_file_logging()</code> (centralized file logging)</li> <li>Helpers like <code>filter_matches</code>, <code>save_figure</code>, <code>sanitize_player</code></li> </ul>"},{"location":"architecture/#4-storage","title":"4) Storage","text":"<ul> <li><code>matches/</code>: raw match JSON (<code>&lt;MATCH_ID&gt;.json</code>)</li> <li><code>output/</code>: chart images (<code>&lt;chart_type&gt;_&lt;player&gt;.png</code>)</li> <li><code>logs/league_stats.log</code>: unified app log (CLI, Analyze, GUI)</li> </ul>"},{"location":"architecture/#5-behavior-and-guarantees","title":"5) Behavior and guarantees","text":"<ul> <li>Caching: Duplicate match IDs are not re-written</li> <li>Error handling: Network/API errors logged; best-effort continuation</li> <li>Case-insensitive Riot ID resolution: <code>analyze.py</code> tries casing variants for IGN + tag line</li> <li>Auto-fetch logic:   1) Count local matches containing the player PUUID   2) If below minimum and token present, run <code>ensure_matches_for_player</code>   3) Reload and summarize before/after counts</li> </ul>"},{"location":"architecture/#6-extending-the-system","title":"6) Extending the system","text":"<p>To add a new visualization: 1) Create a script in <code>visualizations/</code> 2) Import <code>analyze.load_match_files</code> and <code>league</code> as needed 3) Compute your metrics 4) Save a figure to <code>output/</code> with a descriptive filename 5) Document it in <code>visualizations_catalog.md</code> and <code>cli_reference.md</code></p> <p>Notes - Fetching is async-first with a sync fallback to keep the CLI/GUI robust - In headless environments, Matplotlib uses the \u2018agg\u2019 backend automatically</p>"},{"location":"changelog/","title":"Changelog","text":""},{"location":"changelog/#unreleased","title":"Unreleased","text":"<ul> <li>(placeholder)</li> </ul>"},{"location":"changelog/#200-2025-08-21","title":"2.0.0 - 2025-08-21","text":"<ul> <li>BREAKING: Async/batched Riot API fetch is now the default mode for <code>league.py</code>. Sync mode is available via <code>--sync-mode</code> flag. Default concurrency increased from 5 to 8 for improved performance.</li> <li>NEW: Async/batched Riot API fetch with lightweight cache metrics (<code>--concurrency N</code>, <code>--metrics-json FILE</code> flags for <code>league.py</code>). Provides significant performance improvement via controlled parallelism while respecting rate limits. Includes graceful fallback to sync mode if httpx unavailable.</li> <li>ENHANCED: Comprehensive metrics collection for all fetch operations (sync/async) with latency tracking (avg/p95/max), cache hit/miss ratios, retry counts, and per-phase breakdown (match IDs, details, timelines).</li> <li>Added glossary with definitions for IGN, Riot ID, PUUID, Queue ID, Game Mode, Role, Timeline, Objective.</li> <li>Updated architecture diagram to reflect async-first fetching, GUI entry point, and config/logging.</li> <li>Cross-linked glossary terms in README and CLI reference for onboarding clarity.</li> <li>New visualization: lane phase lane metrics timeline (<code>lane_cs_diff.py</code>) with CS/XP/Gold @10/@15 diffs vs inferred opponent (positive = ahead for each); integrated into bulk generation. (Updated) XP/Gold now rendered in a separate figure (<code>lane_resource_diffs_&lt;player&gt;.png</code>) to reduce clutter.</li> <li>GUI logging: Streamlit GUI now writes key actions to <code>logs/league_stats.log</code> by default (resolve PUUID, ensure matches, build visuals, completion). Logging is standardized across CLI/Analyze/GUI via <code>utils.setup_file_logging()</code>.</li> </ul>"},{"location":"changelog/#100-2025-08-17","title":"1.0.0 - 2025-08-17","text":"<ul> <li>First stable release. Introduces Streamlit GUI prototype (<code>stats_visualization/gui_app.py</code>) for interactive chart generation, filtering (ranked only, ARAM inclusion, queue &amp; mode filters), and modal image gallery with download.</li> <li>Adds MkDocs documentation site structure (<code>docs/</code> with architecture, metrics, visualization catalog, CLI reference, troubleshooting, etc.) and configuration (<code>mkdocs.yml</code>).</li> <li>Centralized filtering across CLI and visualization scripts (queue IDs, ranked-only shortcut, game mode whitelist, ARAM toggle).</li> <li>Bulk visualization generation workflow exposed via GUI using existing <code>analyze.generate_all_visuals</code> logic.</li> <li>General polish: lint compliance, version synchronization, robust import handling, output directory hygiene improvements.</li> </ul>"},{"location":"changelog/#050-2025-08-17","title":"0.5.0 - 2025-08-17","text":"<ul> <li>Modernized project structure: added <code>pyproject.toml</code> for PEP 621/517/518 compliance and tool configuration.</li> <li>Version synchronization: all version numbers (<code>pyproject.toml</code>, <code>__init__.py</code>, and docstrings) are now kept in sync and updated together for each release.</li> <li>Improved <code>.gitignore</code>: added <code>logs/</code> and other generated folders to prevent accidental commits of large or sensitive files.</li> <li>Changelog and release workflow: clarified and automated changelog and version bumping for future releases.</li> <li>General code and documentation cleanup: fixed indentation, removed stray code, and improved docstring placement for clarity and maintainability.</li> </ul>"},{"location":"changelog/#040-2025-08-16","title":"0.4.0 - 2025-08-16","text":"<ul> <li>Centralized match filtering (ARAM exclusion by default, <code>--include-aram</code>, <code>--queue</code>, <code>--ranked-only</code>, <code>--modes</code>) extended to <code>analyze.py</code> (parity with visualization scripts).</li> <li><code>analyze.py</code> flag <code>--generate-visuals</code> to produce the full visualization suite post textual analysis (with <code>--no-clean-output</code> opt-out of initial cleanup).</li> <li>Short flag aliases across CLI (<code>-i/-p/-t/-m/-d/-l/-n/-f/-X/-a/-q/-R/-M/-g/-O</code>, plus visualization script equivalents like <code>-c</code>, <code>-D</code>, <code>-r</code>) for faster interactive use.</li> </ul>"},{"location":"changelog/#documentation","title":"Documentation","text":"<ul> <li>Updated README and CLI reference to include new <code>analyze.py</code> filtering flags and examples.</li> <li>Added condensed <code>cli_cheatsheet.md</code> for quick flag and command reference.</li> <li>Replaced ambiguous term 'game name' with 'IGN (in-game name)' across CLI help, docs, and examples for clarity.</li> </ul>"},{"location":"changelog/#030-2025-08-16","title":"0.3.0 - 2025-08-16","text":"<ul> <li>Moved visualization TypedDict models from <code>stats_visualization/types.py</code> to <code>stats_visualization/viz_types.py</code> (prevents stdlib shadowing when running scripts inside package directory).</li> <li>Removed temporary shim <code>stats_visualization/types.py</code> (no external dependents).</li> <li>Documentation updated to recommend module invocation (<code>python -m stats_visualization.league</code>).</li> </ul>"},{"location":"changelog/#020-2025-08-15","title":"0.2.0 - 2025-08-15","text":"<ul> <li>Added <code>save_figure</code> utility and migrated all visualization scripts to use it (consistent DPI, output dir handling).</li> <li>Introduced <code>sanitize_player</code> helper for safe filename construction (replaces manual <code>#</code> to <code>_</code>).</li> <li>Type hint refinements &amp; centralized TypedDict models (<code>stats_visualization/viz_types.py</code>).</li> <li>Personal performance module refactored for consistency with shared utilities.</li> </ul>"},{"location":"changelog/#010-initial-public-draft","title":"0.1.0 - Initial Public Draft","text":"<ul> <li>Core fetch logic (<code>league.py</code>) with auto-fetch threshold.</li> <li><code>analyze.py</code> unified CLI (Riot ID support, case-insensitive lookup, summary output, logging flags).</li> <li>Visualization suite (kills, drakes, barons/heralds, first blood, jungle clear, objectives, farming, personal performance).</li> <li>All visualizations save PNG outputs to <code>output/</code>.</li> <li>TypedDict-based lightweight data models.</li> <li>Documentation set: overview, architecture, CLI reference, metrics, visualization catalog, environment, fetching logic, player config, contributing, troubleshooting.</li> </ul>"},{"location":"cli_cheatsheet/","title":"CLI Cheat Sheet","text":"<p>Ultra\u2011compact reference for frequent commands and flags. See <code>cli_reference.md</code> for full detail.</p>"},{"location":"cli_cheatsheet/#core-commands","title":"Core Commands","text":"<pre><code># Fetch matches (module form recommended)\npython -m stats_visualization.league &lt;IGN&gt; &lt;TAG&gt; &lt;COUNT&gt;\n\n# Fetch (async default). Include timeline and print metrics\npython -m stats_visualization.league &lt;IGN&gt; &lt;TAG&gt; &lt;COUNT&gt; --include-timeline --show-metrics\n\n# Analyze (Riot ID preferred)\npython analyze.py -i &lt;IGN&gt; &lt;TAG&gt; [flags]\n\n# Generate all visuals after analysis\npython analyze.py -i &lt;IGN&gt; &lt;TAG&gt; -g\n\n# Individual visualization (examples)\npython stats_visualization/visualizations/personal_performance.py &lt;IGN&gt; &lt;TAG&gt; -c all\npython stats_visualization/visualizations/objective_analysis.py &lt;IGN&gt; &lt;TAG&gt; -c control\npython stats_visualization/visualizations/farming_analysis.py &lt;IGN&gt; &lt;TAG&gt; -c roles\n</code></pre>"},{"location":"cli_cheatsheet/#highfrequency-flags-short-long","title":"High\u2011Frequency Flags (Short / Long)","text":"Analyze / Visualizations Purpose <code>-i / --riot-id</code> GAME TAG Specify Riot ID (preferred) <code>-p / --player</code> NAME Legacy configured player name <code>-m / --matches-dir DIR</code> Match JSON directory (default <code>matches</code>) <code>-g / --generate-visuals</code> After analysis, build all charts <code>-a / --include-aram</code> Include ARAM (excluded by default) <code>-q / --queue IDS</code> Restrict to queue IDs (e.g. <code>420 440</code>) <code>-R / --ranked-only</code> Shortcut for solo+flex (<code>420 440</code>) <code>-M / --modes MODES</code> Whitelist gameMode values (e.g. <code>CLASSIC</code>) <code>-O / --no-clean-output</code> Keep existing PNGs (skip auto cleanup)"},{"location":"cli_cheatsheet/#analyzeonly-extras","title":"Analyze\u2011Only Extras","text":"Flag Purpose <code>-t / --team-analysis</code> Team/objective aggregate view <code>-n / --min-matches N</code> Auto\u2011fetch threshold (default 5) <code>-f / --fetch-count N</code> Matches to fetch when needed (default 10) <code>-X / --no-auto-fetch</code> Disable auto fetch <code>-d / --debug</code> Force DEBUG logging <code>-l / --log-level LEVEL</code> Set log level (INFO default)"},{"location":"cli_cheatsheet/#match-fetching-leaguepy-extras","title":"Match Fetching (league.py) Extras","text":"Flag Purpose <code>--sync</code> Force synchronous mode (async is default) <code>--include-timeline</code> Fetch timeline data when available <code>--show-metrics</code> Print fetch metrics summary <code>--no-cache</code> Disable caching, re-fetch all"},{"location":"cli_cheatsheet/#visualization-script-extras","title":"Visualization Script Extras","text":"Script Flag (short/long) Purpose personal_performance <code>-c / --chart</code> trends, champions, roles, all farming_analysis <code>-c / --chart</code> farming, gold, roles, all objective_analysis <code>-c / --chart</code> control, first, correlation, all graph_kills <code>-D / --detailed</code> Champion breakdown graph_first_bloods <code>-r / --role-comparison</code> Role early game comparison"},{"location":"cli_cheatsheet/#common-oneliners","title":"Common One\u2011Liners","text":"<pre><code># Ranked only analysis + visuals\npython analyze.py -i Frowtch blue -R -g\n\n# Analyze with ARAM &amp; specific modes\npython analyze.py -i Frowtch blue -a -M CLASSIC CHERRY\n\n# Objective control (ranked only)\npython stats_visualization/visualizations/objective_analysis.py Frowtch blue -c control -R\n\n# Personal performance (champions only, keep old PNGs)\npython stats_visualization/visualizations/personal_performance.py Frowtch blue -c champions -O\n\n# Farming roles view for Solo Queue only\npython stats_visualization/visualizations/farming_analysis.py Frowtch blue -c roles -q 420\n</code></pre>"},{"location":"cli_cheatsheet/#filtering-logic-summary","title":"Filtering Logic Summary","text":"<ul> <li>ARAM excluded unless <code>-a</code> / <code>--include-aram</code>.</li> <li>If queues provided (<code>-q</code>) match must have queueId in list.</li> <li><code>-R</code> sets queue filter to 420 &amp; 440 if none provided.</li> <li>If modes provided (<code>-M</code>), match <code>gameMode</code> must be in the set (combined with other filters by AND).</li> </ul>"},{"location":"cli_cheatsheet/#output-behavior","title":"Output Behavior","text":"<ul> <li>Visualization scripts clean <code>output/*.png</code> unless <code>-O</code>.</li> <li><code>-g</code> in <code>analyze.py</code> runs full visualization suite (same cleaning unless <code>-O</code>).</li> </ul>"},{"location":"cli_cheatsheet/#minimal-troubleshooting","title":"Minimal Troubleshooting","text":"Symptom Quick Fix \"RIOT_API_TOKEN not set\" Add token to <code>config.env</code> (no manual export needed) No matches found Fetch: <code>python -m stats_visualization.league &lt;GAME&gt; &lt;TAG&gt; 10</code> Charts missing Remove <code>-O</code> (ensure cleanup) or verify <code>output/</code> write perms Filters yield 0 games Relax <code>-q</code>/<code>-M</code> or drop <code>-R</code>/<code>-a</code> interplay"},{"location":"cli_cheatsheet/#match-fetch-queues-common-ids","title":"Match Fetch Queues (Common IDs)","text":"ID Queue 420 Ranked Solo/Duo 440 Ranked Flex 430 Normal Draft 400 Normal Blind 450 ARAM <p>For complete descriptions see <code>docs/cli_reference.md</code>.</p>"},{"location":"cli_reference/","title":"CLI Reference","text":"<p>See the Glossary for definitions of IGN, Riot ID, Queue ID, Game Mode, Role, and other terms used below.</p>"},{"location":"cli_reference/#common-pattern","title":"Common Pattern","text":"<pre><code>python stats_visualization/analyze.py --riot-id &lt;IGN&gt; &lt;TAG_LINE&gt; [options]\npython stats_visualization/visualizations/&lt;script&gt;.py &lt;IGN&gt; &lt;TAG_LINE&gt; [options]\n</code></pre> <p>All PNG outputs land in <code>output/</code>.</p>"},{"location":"cli_reference/#analyzepy","title":"analyze.py","text":"<p>Short aliases have been added; long forms still work. Examples: <code>-i</code>, <code>-p</code>, <code>-m</code>, <code>-g</code>, <code>-a</code>, <code>-q</code>, <code>-R</code>, <code>-M</code>, <code>-O</code>.</p> Short Long Description Default <code>-i</code> <code>--riot-id IGN TAG</code> Use Riot ID (preferred; IGN = in-game name) - <code>-p</code> <code>--player NAME</code> Legacy config lookup (case-insensitive) - (none) <code>--team-analysis</code> Aggregate team/objective stats off <code>-m</code> <code>--matches-dir DIR</code> Match JSON directory <code>matches</code> (none) <code>--debug</code> Force DEBUG logging off (none) <code>--log-level LEVEL</code> Logging level (CRITICAL..DEBUG) INFO (none) <code>--min-matches N</code> Minimum player matches required (auto-fetch trigger) 5 (none) <code>--fetch-count N</code> Matches to fetch when auto-fetching 10 (none) <code>--no-auto-fetch</code> Disable auto-fetch off <code>-a</code> <code>--include-aram</code> Include ARAM (excluded by default) off <code>-q</code> <code>--queue IDS</code> Whitelist queue IDs (e.g. <code>420 440</code>) all <code>-R</code> <code>--ranked-only</code> Shortcut for <code>--queue 420 440</code> off <code>-M</code> <code>--modes MODES</code> Whitelist gameMode values (e.g. <code>CLASSIC</code>) all <code>-g</code> <code>--generate-visuals</code> After analysis generate all charts off <code>-O</code> <code>--no-clean-output</code> With --generate-visuals, keep existing PNGs off <p>Examples (short + long forms mixed):</p> <pre><code>python stats_visualization/analyze.py -i Frowtch blue --min-matches 12 --fetch-count 20\npython stats_visualization/analyze.py -i Frowtch blue -R\npython stats_visualization/analyze.py -i Frowtch blue -q 420 440 -M CLASSIC\npython stats_visualization/analyze.py -p frowtch --team-analysis -q 420\npython stats_visualization/analyze.py -i Frowtch blue -g -O\n</code></pre> <p>Filtering behavior matches visualization scripts: ARAM excluded unless <code>--include-aram</code> set; if any of <code>--queue</code> / <code>--modes</code> specified a match must satisfy all provided criteria.</p>"},{"location":"cli_reference/#visualization-scripts","title":"Visualization Scripts","text":"<p>All visualization scripts accept <code>IGN TAG_LINE</code> plus filtering flags. Short aliases mirror analyze.py (<code>-m</code>, <code>-a</code>, <code>-q</code>, <code>-R</code>, <code>-M</code>, <code>-O</code>).</p> Script Purpose Extra Flags (short aliases) <code>visualizations/graph_drakes.py</code> Personal drake &amp; dragon control trends Filtering flags* <code>visualizations/graph_barons_heralds.py</code> Baron &amp; Herald control comparison Filtering flags* <code>visualizations/graph_first_bloods.py</code> Early game &amp; first blood stats <code>-r/--role-comparison</code> + Role filtering flags* <code>visualizations/graph_kills.py</code> Kills, assists, KDA progression Filtering flags* <code>visualizations/farming_analysis.py</code> CS/min, gold efficiency, role economy <code>-c/--chart farming|gold|roles|all</code> + Filtering flags* <code>visualizations/jungle_clear_analysis.py</code> Jungle first clear timing, efficiency Filtering flags* <code>visualizations/lane_cs_diff.py</code> Lane phase lane metrics (CS) + separate XP/Gold diff timeline Filtering flags* <code>visualizations/objective_analysis.py</code> Objective control &amp; first objectives <code>-c/--chart control|first|correlation|all</code> + Filtering flags* <code>visualizations/personal_performance.py</code> Trends, champions, role performance <code>-c/--chart trends|champions|roles|all</code> + Filtering flags*"},{"location":"cli_reference/#output-filenames","title":"Output Filenames","text":"<p>Pattern: <code>&lt;topic&gt;_&lt;PLAYER&gt;.png</code> (Riot ID <code>#</code> replaced by <code>_</code>). ARAM matches are excluded by default for scripts using central filtering unless <code>--include-aram</code> is passed.</p>"},{"location":"cli_reference/#output-cleaning","title":"Output Cleaning","text":"<p>By default, running any visualization script now clears existing <code>output/*.png</code> files before generating new charts. Use <code>--no-clean-output</code> to preserve previous images.</p>"},{"location":"cli_reference/#filtering-flags-centralized","title":"*Filtering Flags (centralized)","text":"Short Long Purpose Notes <code>-a</code> <code>--include-aram</code> Include ARAM games Default: exclude ARAM <code>-q</code> <code>--queue QIDS</code> Whitelist queue IDs e.g. <code>-q 420 440</code> <code>-R</code> <code>--ranked-only</code> Shortcut for <code>--queue 420 440</code> Solo + Flex ranked <code>-M</code> <code>--modes MODES</code> Whitelist gameMode values e.g. <code>-M CLASSIC URF</code> <code>-O</code> <code>--no-clean-output</code> Keep existing PNGs Default: delete before run <p>If multiple filters are provided, a match must satisfy all of them to be included.</p>"},{"location":"cli_reference/#exit-conditions","title":"Exit Conditions","text":"<ul> <li>Missing token prints message &amp; exits.</li> <li>Unknown player (legacy) prints available list &amp; exits.</li> <li>No matches after fetch prints advisory.</li> </ul>"},{"location":"cli_reference/#logging","title":"Logging","text":"<p><code>--debug</code> overrides <code>--log-level</code>. Auto-fetch summary always prints a success line on completion.</p> <p>All entrypoints write to <code>logs/league_stats.log</code> (initialized via <code>utils.setup_file_logging()</code>). The Streamlit GUI also emits INFO logs for PUUID resolution, ensuring matches, generation start, and completion or errors.</p>"},{"location":"cli_reference/#leaguepy-data-fetching","title":"league.py (Data Fetching)","text":"<p>Direct match data fetching from Riot API. Requires <code>RIOT_API_TOKEN</code> environment variable.</p> <p>Usage: <code>python stats_visualization/league.py &lt;IGN&gt; &lt;TAG_LINE&gt; &lt;COUNT&gt; [options]</code></p> Option Description Default <code>--log-level LEVEL</code> Logging level (DEBUG, INFO, WARNING, ERROR) INFO <code>--no-cache</code> Disable caching and re-fetch all matches off <code>--sync</code> Force synchronous mode (default is async) off <code>--include-timeline</code> Also fetch timeline data (slower, may 404 on some) off <code>--show-metrics</code> Print metrics summary to stdout off"},{"location":"cli_reference/#default-async-mode-benefits","title":"Default Async Mode Benefits","text":"<ul> <li>Significantly faster when fetching multiple matches (default behavior)</li> <li>Utilizes network concurrency with rate limit respect  </li> <li>Provides detailed performance metrics</li> <li>Graceful fallback to sync mode if httpx unavailable</li> </ul> <p>Note: Async mode requires the <code>httpx</code> package. If it\u2019s not installed, the CLI will automatically fall back to synchronous mode and print a short notice. Install <code>httpx</code> to restore async behavior.</p> <p>Examples:</p> <pre><code>python stats_visualization/league.py Frowtch blue 10  # async default\n\n# Include timeline and print metrics\npython stats_visualization/league.py Frowtch blue 20 --include-timeline --show-metrics\n\n# Force sync mode for compatibility\npython stats_visualization/league.py Frowtch blue 10 --sync\n</code></pre>"},{"location":"contributing/","title":"Contributing","text":""},{"location":"contributing/#workflow","title":"Workflow","text":"<ol> <li>Fork &amp; clone.</li> <li>Create a feature branch: <code>feat/&lt;slug&gt;</code>.</li> <li>Add / modify code &amp; tests.</li> <li>Run local checks (see below).</li> <li>Open PR with concise description &amp; screenshots of new charts.</li> </ol>"},{"location":"contributing/#local-checks","title":"Local Checks","text":"<ul> <li>Lint/type (optional): <code>python -m py_compile $(git ls-files '*.py')</code> or run mypy if configured.</li> <li>Run tests: <code>pytest -q</code>.</li> </ul>"},{"location":"contributing/#code-style","title":"Code Style","text":"<ul> <li>Prefer explicit imports.</li> <li>Keep functions &lt; ~60 lines; extract helpers.</li> <li>Reuse the shared figure save helper (see <code>stats_visualization/__init__.py</code>).</li> </ul>"},{"location":"contributing/#adding-a-visualization","title":"Adding a Visualization","text":"<ol> <li>Place module in <code>stats_visualization/visualizations/</code>.</li> <li>Provide a <code>generate_&lt;topic&gt;_charts(data, output_dir)</code> entry.</li> <li>Save each figure via <code>save_figure(fig, output_dir, slug)</code>.</li> <li>Append an entry to <code>docs/visualizations_catalog.md</code>.</li> <li>Add a minimal test (see existing tests as template).</li> </ol>"},{"location":"contributing/#commit-messages","title":"Commit Messages","text":"<p>Conventional prefix recommended: - feat: new capability - fix: bug fix - docs: docs only - refactor: no behavior change - test: tests only - chore: tooling/infra</p>"},{"location":"contributing/#versioning","title":"Versioning","text":"<p>Semantic-ish; increment minor for features, patch for fixes.</p>"},{"location":"contributing/#releasing","title":"Releasing","text":"<p>Follow the Release &amp; Docs Policy: 1. Update affected docs (README, changelog, visualization catalog, CLI reference). 2. Move Unreleased entries to a dated version header in <code>docs/changelog.md</code>. 3. Bump <code>__version__</code> in <code>stats_visualization/__init__.py</code>. 4. Commit: <code>chore(release): vX.Y.Z</code>.</p>"},{"location":"contributing/#releasing_1","title":"Releasing","text":"<p>See the top-level <code>RELEASE_CHECKLIST.md</code>.</p> <p>Minimum steps: 1. Update docs &amp; changelog (move Unreleased). 2. Bump <code>__version__</code> in <code>stats_visualization/__init__.py</code>. 3. Commit with <code>chore(release): vX.Y.Z</code>. 4. Annotated tag &amp; push (<code>git tag -a vX.Y.Z -m \"League-Stats X.Y.Z\"</code> then push code + tag). 5. (Optional) GitHub Release using changelog section.</p>"},{"location":"environment/","title":"Environment &amp; Configuration","text":""},{"location":"environment/#required","title":"Required","text":"<ul> <li><code>RIOT_API_TOKEN</code>: Riot Developer API key (put in <code>config.env</code>).</li> </ul>"},{"location":"environment/#loading","title":"Loading","text":"<p><code>config.env</code> is auto-loaded by all scripts (league, analyze, visualizations) via <code>python-dotenv</code> when present.</p>"},{"location":"environment/#rate-limits","title":"Rate Limits","text":"<ul> <li>Riot API short + long limits; excessive rapid fetches may cause 429 responses.</li> <li>Backoff strategy (future): simple sleep &amp; retry.</li> </ul>"},{"location":"environment/#directories","title":"Directories","text":"Directory Purpose <code>matches/</code> Cached raw match JSON files <code>output/</code> Generated charts &amp; derived datasets <code>logs/</code> Application logs (<code>league_stats.log</code>) from CLI, Analyze, and GUI"},{"location":"environment/#tokens-security","title":"Tokens &amp; Security","text":"<ul> <li>Never commit real <code>config.env</code>.</li> <li>Rotate tokens regularly; expired tokens produce 403/401 errors.</li> </ul>"},{"location":"environment/#legacy-player-config","title":"Legacy Player Config","text":"<p>A local mapping (via <code>league.load_player_config()</code>) supports <code>--player</code> flag; Riot ID path preferred.</p>"},{"location":"environment/#system-requirements","title":"System Requirements","text":"<ul> <li>Python 3.12+ (tested 3.13)</li> <li>matplotlib, numpy, requests</li> <li>Optional: <code>httpx</code> (enables async fetching in the CLI; without it the CLI falls back to sync automatically)</li> </ul>"},{"location":"environment/#logging","title":"Logging","text":"<ul> <li>All entrypoints initialize persistent file logging via <code>utils.setup_file_logging()</code>.</li> <li>Log file: <code>logs/league_stats.log</code>.</li> <li>The Streamlit GUI records key steps (PUUID resolution, ensuring matches, visualization generation, completion/errors).</li> </ul>"},{"location":"environment/#optional-settings-future","title":"Optional Settings (Future)","text":"<ul> <li>Proxy configuration for corporate networks</li> <li>Cache TTL for refreshing older matches</li> </ul>"},{"location":"fetching_logic/","title":"Fetching Logic &amp; Auto-Fetch","text":""},{"location":"fetching_logic/#goal","title":"Goal","text":"<p>Ensure a minimum number of recent matches locally for analysis without manual intervention.</p>"},{"location":"fetching_logic/#core-function","title":"Core Function","text":"<p><code>league.ensure_matches_for_player(puuid, token, matches_dir, min_matches, fetch_count)</code>: 1. Count existing local matches for the player. 2. If below <code>min_matches</code>, request up to <code>fetch_count</code> new match IDs. 3. For each new ID not already present, fetch full match (and timeline if available) and save JSON. 4. Return updated count.</p>"},{"location":"fetching_logic/#analyzepy-integration","title":"analyze.py Integration","text":"<ul> <li>Flags: <code>--min-matches</code>, <code>--fetch-count</code>, <code>--no-auto-fetch</code>.</li> <li>After player PUUID resolution, counts player matches and optionally triggers fetch.</li> <li>Prints summary: before -&gt; after counts and time taken.</li> </ul>"},{"location":"fetching_logic/#case-insensitive-riot-id-resolution","title":"Case-Insensitive Riot ID Resolution","text":"<ul> <li>Generates variants (original, lower, upper, title) for the IGN (in\u2011game name) &amp; tag line.</li> <li>Attempts each until PUUID fetch succeeds or exhausts variants.</li> </ul>"},{"location":"fetching_logic/#failure-modes","title":"Failure Modes","text":"Scenario Behavior Missing token Skip fetch, advise user Network/API error Log warning, continue remaining IDs No new matches Summary notes zero delta"},{"location":"fetching_logic/#best-practices","title":"Best Practices","text":"<ul> <li>Keep <code>fetch_count</code> modest (10-20) to reduce rate limit pressure.</li> <li>Increase <code>min_matches</code> when doing longitudinal analysis.</li> <li>Periodically prune stale match files if disk usage grows.</li> </ul>"},{"location":"fetching_logic/#future-enhancements","title":"Future Enhancements","text":"<ul> <li>Parallel fetch with rate limit pacing.</li> <li>Incremental update (only newest N matches).</li> <li>Cache metadata index for faster player match counting.</li> </ul>"},{"location":"fetching_logic/#cli-execution-mode","title":"CLI Execution Mode","text":"<p>The <code>stats_visualization/league.py</code> script fetches asynchronously by default for speed. Async mode requires <code>httpx</code>; if <code>httpx</code> is not installed, the CLI prints a notice and automatically falls back to synchronous fetching. Use <code>--sync</code> to force the legacy synchronous path explicitly. Timelines are optional via <code>--include-timeline</code>.</p>"},{"location":"glossary/","title":"Glossary","text":"<p>This glossary defines key terms used throughout the League Stats project.</p>"},{"location":"glossary/#ign","title":"IGN","text":"<p>In-Game Name. The player's visible username in League of Legends.</p>"},{"location":"glossary/#riot-id","title":"Riot ID","text":"<p>A unique identifier for a player, consisting of IGN and tag_line (e.g., Frowtch#blue).</p>"},{"location":"glossary/#puuid","title":"PUUID","text":"<p>Player Universally Unique Identifier. A globally unique string assigned to each player by Riot Games.</p>"},{"location":"glossary/#queue-id","title":"Queue ID","text":"<p>Numeric code representing the game queue type (e.g., 420 for Ranked Solo/Duo, 450 for ARAM).</p>"},{"location":"glossary/#game-mode","title":"Game Mode","text":"<p>The type of match played (e.g., Summoner's Rift, ARAM, URF).</p>"},{"location":"glossary/#role","title":"Role","text":"<p>The position or function a player fulfills in a match (e.g., Top, Jungle, Mid, ADC, Support).</p>"},{"location":"glossary/#timeline","title":"Timeline","text":"<p>The sequence of events and statistics tracked over the course of a match.</p>"},{"location":"glossary/#objective","title":"Objective","text":"<p>Key map features or goals (e.g., turrets, dragons, barons, heralds) that teams contest for advantages.</p>"},{"location":"metrics_definitions/","title":"Metrics Definitions","text":"Metric Formula / Source Notes Win Rate wins / total_games Displayed as percentage in reports. KDA (kills + assists) / max(1, deaths) Avoid divide-by-zero. CS per Minute (lane minions + neutral minions) / (gameDuration/60) Skips invalid durations. Gold per Minute goldEarned / (gameDuration/60) Rounded for display. Damage per Gold totalDamageDealtToChampions / goldEarned 0 if goldEarned == 0. Vision Score participant.visionScore Raw from match data. Clear Efficiency neutralMinionsKilled / (gameDuration/60) Jungle early efficiency proxy. First Clear Time (est.) Timeline-based or heuristic (see below) Jungle clear estimation. Kill Participation (kills + assists) / teamKills * 100 Team kills aggregated by teamId. Objective Advantage player_team_objectives - enemy_team_objectives Per match; aggregated. Early Game K/D Proxy early_kills / max(1, early_deaths) Used in first blood script for grouping."},{"location":"metrics_definitions/#jungle-first-clear-heuristic","title":"Jungle First Clear Heuristic","text":"<ol> <li>If timeline frames present: derive from jungle camp kill events timestamps.</li> <li>Else approximate using neutral CS thresholds and champion baseline times.</li> </ol>"},{"location":"metrics_definitions/#first-objective-success-rates","title":"First Objective Success Rates","text":"<p>Counts of <code>first</code> flags in team objectives for dragon, baron, herald, tower divided by total games.</p>"},{"location":"metrics_definitions/#data-quality-handling","title":"Data Quality Handling","text":"<ul> <li>Missing numeric fields treated as 0.</li> <li>Corrupt or incomplete match JSON skipped.</li> <li>Average durations computed only over counted matches.</li> </ul>"},{"location":"metrics_definitions/#future-metrics-roadmap","title":"Future Metrics (Roadmap)","text":"<ul> <li>Gold Diff @ 10/15 (needs timeline or frame deltas)</li> <li>CS Diff @ 10</li> <li>Objective Bounties Impact</li> <li>Damage Share &amp; Gold Share</li> <li>Vision Efficiency (wards per minute x clear attempts)</li> </ul>"},{"location":"overview/","title":"League-Stats Overview","text":"<p>Purpose: Fetch, store, analyze, and visualize personal League of Legends match data using the Riot API.</p>"},{"location":"overview/#key-features","title":"Key Features","text":"<ul> <li>Automatic match fetching with configurable minimums and batch sizes.</li> <li>Case-insensitive Riot ID and legacy player config support.</li> <li>Modular visualization scripts (objectives, drakes, barons/heralds, first blood, kills, farming, jungle clear, personal performance).</li> <li>Consistent output artifacts (PNG charts in <code>output/</code>, raw match JSON in <code>matches/</code>).</li> <li>Structured logging and auto-fetch logic in <code>analyze.py</code>.</li> </ul>"},{"location":"overview/#quick-start","title":"Quick Start","text":"<ol> <li>Install dependencies: <code>pip install -r requirements.txt</code></li> <li>Copy <code>config.env.example</code> to <code>config.env</code> and set <code>RIOT_API_TOKEN</code>.</li> <li>(Optional) Add a player to config (legacy): update player mapping in code or use Riot ID directly.</li> <li>Fetch + analyze:</li> <li><code>python stats_visualization/analyze.py --riot-id Frowtch blue --min-matches 10 --fetch-count 15</code></li> <li>Generate a visualization, e.g. drakes:</li> <li><code>python stats_visualization/visualizations/graph_drakes.py Frowtch blue</code></li> </ol>"},{"location":"overview/#directory-layout","title":"Directory Layout","text":"<ul> <li><code>stats_visualization/league.py</code> Riot API + data persistence helpers</li> <li><code>stats_visualization/analyze.py</code> Core stats summary (player/team)</li> <li><code>stats_visualization/visualizations/</code> Individual chart scripts</li> <li><code>matches/</code> Cached raw match JSON</li> <li><code>output/</code> Generated PNG charts / derived JSON</li> <li><code>docs/</code> Project documentation</li> </ul>"},{"location":"overview/#typical-workflow","title":"Typical Workflow","text":"<p>Fetch or auto-fetch -&gt; Inspect <code>analyze</code> report -&gt; Run one or more visualization scripts -&gt; Review saved PNGs in <code>output/</code>.</p>"},{"location":"overview/#supported-python","title":"Supported Python","text":"<p>Target: 3.12+ (currently using 3.13 locally).</p>"},{"location":"player_config/","title":"Player Configuration (Legacy Mode)","text":""},{"location":"player_config/#overview","title":"Overview","text":"<p>Legacy <code>--player</code> flag loads a local mapping of friendly names -&gt; PUUIDs via <code>league.load_player_config()</code>.</p>"},{"location":"player_config/#why-keep-it","title":"Why Keep It?","text":"<ul> <li>Backwards compatibility.</li> <li>Offline reuse without repeated Riot ID lookups.</li> </ul>"},{"location":"player_config/#recommended-migration","title":"Recommended Migration","text":"<p>Prefer <code>--riot-id GAME TAG</code> which performs live PUUID lookup (with case-insensitive attempts).</p>"},{"location":"player_config/#adding-a-player","title":"Adding a Player","text":"<p>Update the player config source (e.g., JSON or dict inside <code>league.py</code> if currently hard-coded) with the new mapping.</p>"},{"location":"player_config/#case-insensitivity","title":"Case Insensitivity","text":"<p><code>analyze.py</code> normalizes <code>--player</code> by lowercasing and matching against a lowercase -&gt; canonical map.</p>"},{"location":"player_config/#removal-plan-future","title":"Removal Plan (Future)","text":"<ul> <li>Deprecation warning when <code>--player</code> used.</li> <li>Provide export/import tool for mapping if externalized.</li> </ul>"},{"location":"troubleshooting/","title":"Troubleshooting","text":"Issue Symptom Fix Missing token Message: RIOT_API_TOKEN not set Add to <code>config.env</code> and retry 401/403 errors API calls fail immediately Verify token validity &amp; region 429 rate limit Fetch stops early Wait, reduce <code>--fetch-count</code> No matches found Zero games after fetch Increase <code>--fetch-count</code>, verify PUUID Wrong player data Stats zero or mismatched Check Riot ID casing; verify region (Americas routing assumed) Charts empty PNG shows placeholders/no bars Ensure enough games for that metric (e.g., role min 2 games) Unicode in filenames Saved file missing <code>#</code> replaced with <code>_</code>, ensure filesystem supports name Slow plotting Large dataset lag Limit matches or pre-filter; use Agg backend headless"},{"location":"troubleshooting/#debugging-tips","title":"Debugging Tips","text":"<ul> <li>Use <code>--debug</code> to enable verbose logs in <code>analyze.py</code>.</li> <li>Manually inspect a match file in <code>matches/</code> to confirm participant PUUID.</li> <li>Cross-check PUUID via direct Riot API call if suspicion of mismatch.</li> </ul>"},{"location":"troubleshooting/#common-data-gaps","title":"Common Data Gaps","text":"<ul> <li>Some timelines unavailable (older or special modes).</li> <li>Incomplete objective fields in non-SR modes; scripts skip gracefully.</li> </ul>"},{"location":"troubleshooting/#regenerating-outputs","title":"Regenerating Outputs","text":"<p>Delete specific PNG in <code>output/</code> and re-run the corresponding visualization script.</p>"},{"location":"visualizations_catalog/","title":"Visualizations Catalog","text":"File Output Name Pattern Focus Key Insights graph_drakes.py drake_analysis_.png Dragon counts &amp; trends Player vs enemy drakes, temporal control (ARAM excluded by default; filtering flags) graph_barons_heralds.py barons_heralds_.png Baron/Herald control Objective advantage &amp; win correlation (ARAM excluded by default; filtering flags) graph_first_bloods.py first_bloods_.png Early aggression &amp; outcomes Early performance vs win rate graph_kills.py kills_analysis_.png Kills/KDA progression Trend lines &amp; participation (filtering flags) farming_analysis.py (farming) farming_performance_.png CS distribution &amp; role variance Consistency &amp; role differences (filtering flags) farming_analysis.py (gold) gold_efficiency_.png Gold &amp; damage efficiency Correlation &amp; economy pacing (filtering flags) farming_analysis.py (roles) role_economy_.png Economy by role Comparative benchmarks (filtering flags) jungle_clear_analysis.py jungle_clear_analysis.png First clear &amp; efficiency Clear timing consistency (filtering flags) lane_cs_diff.py lane_cs_diff_.png, lane_resource_diffs_.png Lane phase lane metrics timeline CS@10/@15 lane advantage trends; XP/Gold diffs now in separate figure objective_analysis.py (control) objective_control_.png Team objective averages Control vs win indicators (ARAM excluded by default; filtering flags) objective_analysis.py (first) first_objectives_.png First objective success Early control impact (ARAM excluded by default; filtering flags) personal_performance.py (trends) performance_trends_.png KDA &amp; win rate trends Improvement trajectory (filtering flags) personal_performance.py (champions) champion_performance_.png Champion stats Champion pool strengths (filtering flags) personal_performance.py (roles) role_performance_.png Role performance Role-specific consistency (filtering flags)"},{"location":"visualizations_catalog/#naming-conventions","title":"Naming Conventions","text":"<ul> <li>Replace <code>#</code> with <code>_</code> in player identifier.</li> <li>Lowercase topic segments.</li> </ul>"},{"location":"visualizations_catalog/#adding-a-new-visualization","title":"Adding a New Visualization","text":"<ol> <li>Create script in <code>visualizations/</code>.</li> <li>Add save call with pattern <code>&lt;topic&gt;_&lt;player&gt;.png</code>.</li> <li>Update this catalog and <code>cli_reference.md</code>.</li> <li>Ensure outputs go to <code>output/</code>.</li> </ol>"},{"location":"visualizations_catalog/#figure-saving-utilities","title":"Figure Saving &amp; Utilities","text":"<p>All visualization scripts now use the centralized helper <code>save_figure</code> from <code>stats_visualization/utils.py</code>.</p> <p>Most scripts now support centralized match filtering via shared flags: <code>--include-aram</code>, <code>--queue</code>, <code>--ranked-only</code>, <code>--modes</code>. These combine (logical AND) and default to excluding ARAM with no queue/mode restriction.</p> <p>Benefits: - Consistent DPI (300) and tight bounding box. - Single place to adjust global saving behavior (naming, formats later, etc.). - Automatic creation of the <code>output/</code> directory.</p> <p>Usage pattern:</p> <pre><code>from stats_visualization.utils import save_figure, sanitize_player\n\nfig, ax = plt.subplots(...)\n... # plotting logic\nsave_figure(fig, f\"my_chart_{sanitize_player(player_name)}\", description=\"my chart\")\n</code></pre> <p>When adding new visualizations, prefer this utility instead of calling <code>plt.savefig</code> directly. If a different image format or additional metadata is needed in the future, extend <code>save_figure</code> once and all scripts benefit automatically.</p>"}]}